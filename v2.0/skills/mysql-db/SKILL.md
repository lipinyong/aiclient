---
name: mysql-db
description: 连接MySQL数据库并执行增删改查操作，添加、修改和删除操作需要确认才能执行
triggers: [mysql, 数据库, 增删改查, SQL, 连接数据库, 查询数据, 插入数据, 更新数据, 删除数据]
---

# MySQL 数据库操作技能

本技能提供连接MySQL数据库并执行增删改查操作的功能。特别地，对于修改（UPDATE）和删除（DELETE）操作，需要用户确认后才能执行，以防止误操作。

## 🚀 使用步骤

### 1. 连接数据库
首先需要提供MySQL连接信息：
- 主机地址（host）
- 端口号（port，默认3306）
- 用户名（username）
- 密码（password）
- 数据库名（database）

### 2. 执行查询操作（SELECT）
可以直接执行SELECT查询语句，无需确认：
```sql
SELECT * FROM users WHERE id = 1;
SELECT name, email FROM customers ORDER BY created_at DESC;
```

### 3. 执行插入操作（INSERT）
可以直接执行INSERT插入语句，无需确认：
```sql
INSERT INTO users (name, email, age) VALUES ('张三', 'zhangsan@example.com', 25);
```

### 4. 执行修改操作（UPDATE）
执行UPDATE语句时需要确认：
1. 首先会显示将要执行的UPDATE语句
2. 询问用户是否确认执行
3. 只有用户明确确认后才会执行

### 5. 执行删除操作（DELETE）
执行DELETE语句时需要确认：
1. 首先会显示将要执行的DELETE语句
2. 询问用户是否确认执行
3. 只有用户明确确认后才会执行

## 📋 示例

### 示例1：连接数据库
```
用户：连接MySQL数据库
助手：请提供连接信息：
- 主机地址：
- 端口号（默认3306）：
- 用户名：
- 密码：
- 数据库名：
```

### 示例2：查询数据
```
用户：查询用户表中所有数据
助手：执行SQL：SELECT * FROM users;
结果：[显示查询结果]
```

### 示例3：更新数据（需要确认）
```
用户：将用户ID为1的年龄改为30
助手：将要执行UPDATE语句：
UPDATE users SET age = 30 WHERE id = 1;

请确认是否执行此操作？(是/否)
用户：是
助手：✅ 更新成功，影响行数：1
```

### 示例4：删除数据（需要确认）
```
用户：删除ID为5的用户
助手：将要执行DELETE语句：
DELETE FROM users WHERE id = 5;

请确认是否执行此操作？(是/否)
用户：否
助手：❌ 操作已取消
```

## ⚠️ 注意事项

1. **安全第一**：修改和删除操作需要确认，避免误操作
2. **连接信息**：请妥善保管数据库连接信息，不要泄露敏感信息
3. **事务处理**：重要操作建议在事务中执行
4. **错误处理**：SQL语法错误或连接问题会有明确的错误提示
5. **性能考虑**：大数据量操作时请注意性能影响

## 🔧 技术实现

本技能使用Python的`mysql-connector-python`库连接MySQL数据库。主要功能包括：
- 建立数据库连接
- 执行SQL语句
- 处理查询结果
- 实现确认机制
- 错误处理和连接关闭

## 📝 最佳实践

1. **测试环境**：建议先在测试环境验证SQL语句
2. **备份数据**：执行重要操作前备份数据
3. **使用事务**：对于多个相关操作，使用事务确保一致性
4. **参数化查询**：防止SQL注入攻击
5. **连接管理**：及时关闭数据库连接

## 🆘 常见问题

**Q：连接失败怎么办？**
A：检查连接信息是否正确，确保MySQL服务正在运行，防火墙设置允许连接。

**Q：SQL语句执行错误怎么办？**
A：检查SQL语法是否正确，表名和字段名是否存在，权限是否足够。

**Q：如何取消确认操作？**
A：在确认步骤输入"否"或"取消"即可。

**Q：支持事务吗？**
A：支持，可以手动开启、提交或回滚事务。

---

**提示**：使用本技能时，请确保已安装`mysql-connector-python`库。如未安装，可以使用以下命令安装：
```bash
pip install mysql-connector-python
```